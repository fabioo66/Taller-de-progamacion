programa ejercicio3b
procesos
  proceso juntarPapeles(E limite: numero)
  variables
    papeles: numero
  comenzar
    papeles:= 0
    mientras((HayPapelEnLaEsquina) & (papeles <> limite))
      tomarPapel
      papeles:= papeles + 1
  fin    
  proceso etapa
  variables
    papelesRandom: numero
  comenzar
    mientras(PosCa < 100)
      Random(papelesRandom, 1,5)
      mientras(HayPapelEnLaEsquina)
        juntarPapeles(papelesRandom)
      mover  
  fin
areas
  areaRobot1 : AreaP(1,1,1,100)
  areaRobot2 : AreaP(2,1,2,100)
  areaRobot3 : AreaP(3,1,3,100)
  areaJefe : AreaP(4,1,4,1)
robots
  robot recolectorR1
  variables
    quien: numero
    go: boolean
  comenzar
    RecibirMensaje(quien, robot4)
    mientras(PosCa < 100)
      etapa
      EnviarMensaje(V, robot2)
      EnviarMensaje(V, robot3)
      repetir 2
        RecibirMensaje(go, *) 
  fin
  robot recolectorR2
  variables
    quien: numero
    go: boolean
  comenzar
    RecibirMensaje(quien, robot4)
    mientras(PosCa < 100)
      etapa
      EnviarMensaje(V, robot1)
      EnviarMensaje(V, robot3)
      repetir 2
        RecibirMensaje(go, *) 
  fin
  robot recolectorR3
  variables
    quien: numero
    go: boolean
  comenzar
    RecibirMensaje(quien, robot4)
    mientras(PosCa < 100)
      etapa
      EnviarMensaje(V, robot1)
      EnviarMensaje(V, robot2)
      repetir 2
        RecibirMensaje(go, *)  
  fin
  robot jefe
  comenzar
    EnviarMensaje(1,robot1)
    EnviarMensaje(2,robot2)
    EnviarMensaje(3,robot3)
  fin
variables
  robot1: recolectorR1
  robot2: recolectorR2
  robot3: recolectorR3
  robot4: jefe
comenzar
  AsignarArea(robot1, areaRobot1)
  AsignarArea(robot2, areaRobot2)
  AsignarArea(robot3, areaRobot3)
  AsignarArea(robot4, areaJefe)
  Iniciar(robot1, 1,1)
  Iniciar(robot2, 2,1)
  Iniciar(robot3, 3,1)
  Iniciar(robot4, 4,1)
fin