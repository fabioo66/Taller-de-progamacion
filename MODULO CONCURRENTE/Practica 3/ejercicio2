programa ejercicio2
procesos
  proceso juntarFlores(ES flores:numero)
  comenzar
    mientras(HayFlorEnLaEsquina)
      tomarFlor
      flores:= flores + 1
  fin

  proceso juntarPapeles(ES papeles: numero)
  comenzar
    mientras(HayPapelEnLaEsquina)
      tomarPapel
      papeles:= papeles + 1
  fin

  proceso izquierda
  comenzar
    repetir 3
      derecha
  fin
  
  proceso cientoOchento
  comenzar
    repetir 2
      derecha
  fin

  proceso vueltitaRobot1
  comenzar
    mover
    derecha
    BloquearEsquina(16,16)
    mover
    EnviarMensaje(1, robot3)
    cientoOchento
    mover
    LiberarEsquina(16,16) 
    repetir 2
      mover    
    derecha
  fin

  proceso vueltitaRobot2
  comenzar
    mover
    izquierda
    BloquearEsquina(16,16)
    mover
    EnviarMensaje(1,robot3)
    cientoOchento
    mover
    LiberarEsquina(16, 16)    
    repetir 2
      mover  
    izquierda
  fin    

  proceso EscalonRobot1(E alto:numero; ES flores:numero)
  comenzar
    juntarFlores(flores)
    repetir alto
      mover
    juntarFlores(flores)  
    derecha
    repetir alto
      mover 
  fin

  proceso EscalonInvertidoRobot1(E alto: numero; ES flores:numero)
  comenzar
    juntarFlores(flores)
    repetir alto
      mover
    juntarFlores(flores)  
    izquierda
    repetir alto+1
      mover
  fin
  
  proceso EscalonRobot2(E alto: numero; ES papeles:numero)
  comenzar
    juntarPapeles(papeles)
    repetir alto 
      mover
    juntarPapeles(papeles)  
    izquierda
    repetir alto
      mover
  fin

  proceso EscalonInvertidoRobot2(E alto: numero; ES papeles:numero)
  comenzar
    juntarPapeles(papeles)
    repetir alto
      mover
    juntarPapeles(papeles)  
    derecha
    repetir alto+1
      mover
  fin

  proceso circuitoRobot1(ES flores:numero)
  variables
    alto: numero
  comenzar
    alto:= 5
    repetir 4
      EscalonRobot1(alto, flores)
      izquierda
      alto:= alto - 1
    juntarFlores(flores)  
    vueltitaRobot1
    alto:= 2
    repetir 3
      EscalonInvertidoRobot1(alto, flores)
      derecha
      alto:= alto + 1 
    juntarFlores(flores)  
    repetir 5 
      mover          
  fin

  proceso circuitoRobot2(ES papeles:numero)
  variables 
    alto: numero
  comenzar
    alto:= 5
    repetir 4
      EscalonRobot2(alto, papeles)
      derecha
      alto:= alto - 1
    juntarPapeles(papeles)  
    vueltitaRobot2
    alto:= 2
    repetir 3
      EscalonInvertidoRobot2(alto, papeles)
      izquierda
      alto:= alto + 1
    juntarPapeles(papeles)  
    repetir 5
      mover    
  fin
areas
  areaParcialmenteCompartida : AreaC(16,16,16,16)
  areaRobot1y3 : AreaPC(1,1,15,100)
  areaRobot2 : AreaP(17,1,31,100)
robots
  robot tipo1
  variables
    quien, flores: numero
  comenzar
    flores:= 0
    RecibirMensaje(quien, robot3)
    circuitoRobot1(flores)
    EnviarMensaje(quien, robot3)
    Informar(flores)
  fin

  robot tipo2
  variables
    quien, papeles: numero
  comenzar
    papeles:= 0
    RecibirMensaje(quien, robot3)
    circuitoRobot2(papeles)
    Informar(papeles)
  fin

  robot jefe
  variables
    ganador: numero
  comenzar
    EnviarMensaje(1, robot1)
    EnviarMensaje(2, robot2)
    RecibirMensaje(ganador, *)
    Informar(ganador)
  fin
    
variables
  robot1: tipo1
  robot2: tipo2
  robot3: jefe
comenzar
  AsignarArea(robot1, areaRobot1y3)
  AsignarArea(robot1, areaParcialmenteCompartida)
  AsignarArea(robot2, areaRobot2)
  AsignarArea(robot2, areaParcialmenteCompartida)
  AsignarArea(robot3, areaRobot1y3)
  Iniciar(robot1, 1,1)
  Iniciar(robot2, 31,1)
  Iniciar(robot3,15,1)
fin  