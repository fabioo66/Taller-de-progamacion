programa ejercicio4b
procesos
  proceso tirarFlor
  comenzar
    si(HayFlorEnLaBolsa)
      depositarFlor
  fin
areas
  areaCompartida : AreaC(1,1,100,100)
robots
  robot recolector
  variables
    quien, estado, avInicio, caInicio: numero
  comenzar
    estado:= 1
    avInicio:= PosAv
    caInicio:= PosCa
    RecibirMensaje(quien, robot5)
    mientras(estado = 1)
      BloquearEsquina(10,10)
      Pos(10,10)
      si(HayFlorEnLaEsquina)
        tomarFlor
        Pos(avInicio, caInicio)
        LiberarEsquina(10,10)  
        BloquearEsquina(11,11)
        Pos(11,11)
        tirarFlor
        Pos(avInicio, caInicio)
        LiberarEsquina(11,11)
      sino
        estado:= 0
        Pos(avInicio, caInicio)
        LiberarEsquina(10,10)
    EnviarMensaje(quien, robot5)  
  fin
  robot jefe
  variables
    numRobot: numero
  comenzar
    EnviarMensaje(1, robot1)
    EnviarMensaje(2, robot2)
    EnviarMensaje(3, robot3)
    EnviarMensaje(4, robot4)
    repetir 4
      RecibirMensaje(numRobot, *)
    Informar(numRobot)
    BloquearEsquina(11,11)
    Pos(11,11)
    mientras(HayFlorEnLaEsquina)
      tomarFlor
    Pos(1,1)
    LiberarEsquina(11,11)         
  fin
variables
  robot1: recolector
  robot2: recolector
  robot3: recolector
  robot4: recolector
  robot5: jefe
comenzar
  AsignarArea(robot1, areaCompartida)
  AsignarArea(robot2, areaCompartida)
  AsignarArea(robot3, areaCompartida)
  AsignarArea(robot4, areaCompartida)
  AsignarArea(robot5, areaCompartida)
  Iniciar(robot1, 9,9)
  Iniciar(robot2, 9,10)
  Iniciar(robot3, 9,11)
  Iniciar(robot4, 9,12)
  Iniciar(robot5, 1,1)
fin  