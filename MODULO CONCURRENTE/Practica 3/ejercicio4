programa ejercicio4
procesos
  proceso tirarFlor
  comenzar
    si(HayFlorEnLaBolsa)
      depositarFlor
  fin
areas
  areaParcialmenteCompartida : AreaPC(10,10,10,10)
  areaCompartida : AreaC(11,11,11,11)
  areaRobot1 : AreaP(9,9,9,9)
  areaRobot2 : AreaP(9,10,9,10)
  areaRobot3 : AreaP(9,11,9,11)
  areaRobot4 : AreaP(9,12,9,12)
  areaRobot5 : AreaP(1,1,1,1)
robots
  robot recolector
  variables
    quien, avInicio, caInicio: numero
    estado: boolean
  comenzar
    estado:= V
    avInicio:= PosAv
    caInicio:= PosCa
    RecibirMensaje(quien, robot5)
    mientras(estado = V)
      BloquearEsquina(10,10)
      Pos(10,10)
      si(HayFlorEnLaEsquina)
        tomarFlor
        BloquearEsquina(11,11)
        Pos(11,11)
        LiberarEsquina(10,10)
        tirarFlor
        Pos(avInicio, caInicio)
        LiberarEsquina(11,11)
      sino
        estado:= F
        Pos(avInicio, caInicio)
        LiberarEsquina(10,10)
    EnviarMensaje(quien, robot5)  
  fin
  robot jefe
  variables
    numRobot: numero
  comenzar
    EnviarMensaje(1, robot1)
    EnviarMensaje(2, robot2)
    EnviarMensaje(3, robot3)
    EnviarMensaje(4, robot4)
    repetir 4
      RecibirMensaje(numRobot, *)
    Informar(numRobot)
    BloquearEsquina(11,11)
    Pos(11,11)
    mientras(HayFlorEnLaEsquina)
      tomarFlor
    Pos(1,1)
    LiberarEsquina(11,11)         
  fin
variables
  robot1: recolector
  robot2: recolector
  robot3: recolector
  robot4: recolector
  robot5: jefe
comenzar
  AsignarArea(robot1, areaParcialmenteCompartida)
  AsignarArea(robot1, areaCompartida)
  AsignarArea(robot1, areaRobot1)
  AsignarArea(robot2, areaParcialmenteCompartida)
  AsignarArea(robot2, areaCompartida)
  AsignarArea(robot2, areaRobot2)
  AsignarArea(robot3, areaParcialmenteCompartida)
  AsignarArea(robot3, areaCompartida)
  AsignarArea(robot3, areaRobot3)
  AsignarArea(robot4, areaParcialmenteCompartida)
  AsignarArea(robot4, areaCompartida)
  AsignarArea(robot4, areaRobot4)
  AsignarArea(robot5, areaRobot5)
  AsignarArea(robot5, areaCompartida)
  Iniciar(robot1, 9,9)
  Iniciar(robot2, 9,10)
  Iniciar(robot3, 9,11)
  Iniciar(robot4, 9,12)
  Iniciar(robot5, 1,1)
fin